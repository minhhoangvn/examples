---
apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  namespace: istio-system
  name: example-integrate-keyfactor-ca
spec:
  profile: demo
  addonComponents:
    istiocoredns:
      enabled: true  
  values:
    global:
      hub: "thedemoland"
      tag: "khoahoang"
      imagePullPolicy: "Always"
      multiCluster:
        enabled: true
        clusterName: kms.cluster.a
      controlPlaneSecurityEnabled: true
      caProvider: "KeyfactorCA"
      caAddress: "https://kmstech.thedemodrive.com"
      # Configure the external CA Provider by Keyfactor.
      keyfactor: 
        # secretName: "keyfactor-config"
        # configPath: "/etc/keyfactor/config.json"

        secretName: ""
        # Name of certificate authorization
        caName: "Keyfactor.thedemodrive.com\\Keyfactor Demo Drive CA 1"

        # Using for authentication header
        authToken: "Basic dGhlZGVtb2RyaXZlXGttc3RlY2g6R3JxVVdjdVZ4MkY1UlYqdA"

        # Certificate Template for enroll the new one: Default is Istio
        caTemplate: "Istio"

        # ApiKey from Api Setting
        appKey: "7vZGOED+WIw0aA=="
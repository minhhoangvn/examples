- name: "Clean runtime files"
  file:
    path: "{{ playbook_dir }}/../../templates/{{ item }}.yaml"
    state: absent
  with_items:
        - dns-a-run
        - dns-b-run
        - serviceentryclustera
        - serviceentryclusterb
        - proxy-config
        - credentials
        - istio-config
  changed_when: false

- name: "Clean runtime certs files"
  file:
    path: "{{ playbook_dir }}/../../templates/certs/{{ item }}"
    state: absent
  with_items:
        - custom-ca.crt
        - custom-ca.key
        - root-cert.pem
  changed_when: false

- name: "Clean istio installation files"
  command: 'rm -rf "{{ playbook_dir }}/../../release/{{ item }}"'
  with_items:
        - charts
        - istioctl-linux-amd64
  changed_when: false
  args: 
    warn: false